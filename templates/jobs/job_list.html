{% extends 'mainpages/base.html' %}
{% load static %}
  {% load i18n %}

{% block content %}
<style>
:root {
  /* Bacoor City Official Colors */
  --bacoor-blue: #1e40af;
  --bacoor-blue-light: #3b82f6;
  --bacoor-gold: #f59e0b;
  --bacoor-green: #059669;
  
  --primary-color: #1e40af;
  --primary-dark: #1e3a8a;
  --primary-light: #dbeafe;
  --success-color: #059669;
  --warning-color: #f59e0b;
  --danger-color: #ef4444;
  --text-dark: #0f172a;
  --text-medium: #475569;
  --text-light: #64748b;
  --bg-light: #f8fafc;
  --bg-white: #ffffff;
  --border-color: #e2e8f0;
  --gradient-primary: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
  --gradient-bacoor: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #f59e0b 100%);
  --shadow-sm: 0 1px 3px 0 rgba(30, 64, 175, 0.1);
  --shadow-md: 0 4px 6px -1px rgba(30, 64, 175, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(30, 64, 175, 0.1);
}

/* Compact Hero Section - Bacoor Theme */
.compact-hero {
  background: var(--gradient-bacoor);
  padding: 2rem 0 1.5rem;
  position: relative;
  overflow: hidden;
  animation: gradientAnimation 15s ease infinite;
  background-size: 200% 200%;
}

@keyframes gradientAnimation {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.compact-hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  opacity: 0.3;
}

.compact-hero .container {
  position: relative;
  z-index: 2;
}

.hero-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
}

.hero-title-section h1 {
  color: white;
  font-size: 1.75rem;
  font-weight: 700;
  margin: 0 0 0.25rem 0;
}

.hero-title-section p {
  color: rgba(255, 255, 255, 0.9);
  margin: 0;
  font-size: 0.95rem;
}

.hero-stats {
  display: flex;
  gap: 2rem;
}

.stat-item {
  text-align: center;
  color: white;
}

.stat-number {
  font-size: 1.5rem;
  font-weight: 700;
  display: block;
}

.stat-label {
  font-size: 0.85rem;
  opacity: 0.9;
}

/* Minimized Search Bar */
.search-bar-compact {
  background: white;
  border-radius: 12px;
  padding: 0.75rem 1rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  box-shadow: var(--shadow-lg);
}

.search-input-compact {
  flex: 1;
  border: none;
  outline: none;
  font-size: 0.95rem;
  padding: 0.5rem;
}

.search-input-compact::placeholder {
  color: var(--text-light);
}

.filter-toggle-btn {
  background: var(--bg-light);
  border: 1px solid var(--border-color);
  padding: 0.5rem 1rem;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.9rem;
  color: var(--text-dark);
  font-weight: 500;
}

.filter-toggle-btn:hover {
  background: var(--primary-light);
  border-color: var(--primary-color);
  color: var(--primary-color);
}

.filter-toggle-btn.active {
  background: var(--primary-color);
  border-color: var(--primary-color);
  color: white;
}

.search-btn-compact {
  background: var(--gradient-primary);
  color: white;
  border: none;
  padding: 0.5rem 1.5rem;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.search-btn-compact:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

/* Collapsible Filters */
.filters-panel {
  background: white;
  border-radius: 12px;
  margin-top: 1rem;
  padding: 1.5rem;
  box-shadow: var(--shadow-md);
  display: none;
  animation: slideDown 0.3s ease-out;
}

.filters-panel.show {
  display: block;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.filter-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin-bottom: 1rem;
}

.filter-group label {
  display: block;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-dark);
  margin-bottom: 0.5rem;
}

.filter-group select,
.filter-group input {
  width: 100%;
  padding: 0.6rem;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  font-size: 0.9rem;
  transition: all 0.2s;
}

.filter-group select:focus,
.filter-group input:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(26, 148, 212, 0.1);
}

.filter-actions {
  display: flex;
  gap: 0.75rem;
  justify-content: flex-end;
  padding-top: 1rem;
  border-top: 1px solid var(--border-color);
}

/* Main Content */
.main-wrapper {
  background: var(--bg-light);
  min-height: 70vh;
  padding: 2rem 0;
}

.content-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
  gap: 1rem;
}

.results-info {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.results-count {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--text-dark);
}

.results-count span {
  color: var(--primary-color);
}

.view-toggle {
  display: flex;
  gap: 0.5rem;
  background: white;
  padding: 0.25rem;
  border-radius: 8px;
  border: 1px solid var(--border-color);
}

.view-btn {
  padding: 0.5rem 0.75rem;
  border: none;
  background: none;
  cursor: pointer;
  border-radius: 6px;
  color: var(--text-medium);
  transition: all 0.2s;
}

.view-btn.active {
  background: var(--primary-color);
  color: white;
}

.content-actions {
  display: flex;
  gap: 0.75rem;
  align-items: center;
  flex-wrap: wrap;
}

.sort-dropdown {
  padding: 0.6rem 1rem;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: white;
  font-size: 0.9rem;
  cursor: pointer;
  min-width: 180px;
}

.btn-primary-custom {
  background: var(--gradient-primary);
  color: white;
  padding: 0.6rem 1.25rem;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  transition: all 0.2s;
  border: none;
  cursor: pointer;
  font-size: 0.9rem;
}

.btn-primary-custom:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
  color: white;
  text-decoration: none;
}

/* Job Cards - List View */
.jobs-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.job-card-list {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border-color);
  transition: all 0.3s;
  display: flex;
  gap: 1.5rem;
  position: relative;
}

.job-card-list:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.job-thumbnail {
  width: 180px;
  height: 140px;
  border-radius: 10px;
  overflow: hidden;
  flex-shrink: 0;
  background: var(--bg-light);
  position: relative;
}

.job-thumbnail-link {
  display: block;
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
  cursor: pointer;
}

.job-thumbnail-link::after {
  content: 'üëÅÔ∏è View Details';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  font-weight: 600;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 1;
}

.job-thumbnail-link:hover::after {
  opacity: 1;
}

.job-thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s;
}

.job-thumbnail-link:hover img {
  transform: scale(1.05);
}

.no-image-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: var(--text-light);
}

.no-image-placeholder i {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
  opacity: 0.5;
}

.job-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
}

.job-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 0.75rem;
  gap: 1rem;
}

.job-title-link {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--text-dark);
  text-decoration: none;
  transition: color 0.2s;
  line-height: 1.3;
}

.job-title-link:hover {
  color: var(--primary-color);
  text-decoration: none;
}

.job-status-badges {
  display: flex;
  gap: 0.5rem;
  flex-shrink: 0;
}

.status-badge {
  padding: 0.35rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
}

.status-badge.hiring {
  background: rgba(16, 185, 129, 0.1);
  color: var(--success-color);
}

.status-badge.closed {
  background: rgba(239, 68, 68, 0.1);
  color: var(--danger-color);
}

.status-badge.new {
  background: rgba(245, 158, 11, 0.1);
  color: var(--warning-color);
  animation: pulse-badge 2s infinite;
}

@keyframes pulse-badge {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.job-meta-row {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem;
  margin-bottom: 0.75rem;
  font-size: 0.9rem;
  color: var(--text-medium);
}

.meta-item {
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.meta-item i {
  color: var(--primary-color);
  font-size: 0.95rem;
}

.job-description-preview {
  color: var(--text-medium);
  line-height: 1.6;
  margin-bottom: 1rem;
  font-size: 0.95rem;
  flex: 1;
}

.job-footer-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 1rem;
  border-top: 1px solid var(--border-color);
  margin-top: auto;
}
.job-budget {
  font-size: 1.5rem;
  font-weight: 700;
  color: #ffffff;
}

.job-actions {
  display: flex;
  gap: 0.75rem;
}

.btn-view-details {
  background: var(--gradient-primary);
  color: white;
  padding: 0.6rem 1.25rem;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 600;
  transition: all 0.2s;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.9rem;
}

.btn-view-details:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
  color: white;
  text-decoration: none;
}

/* Grid View */
.jobs-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 1.5rem;
}

.job-card-grid {
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border-color);
  transition: all 0.3s;
  display: flex;
  flex-direction: column;
}

.job-card-grid:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.job-image-grid {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: var(--bg-light);
  position: relative;
}

.job-image-link {
  display: block;
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
  cursor: pointer;
}

.job-image-link::after {
  content: 'üëÅÔ∏è View Details';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  font-weight: 600;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 1;
}

.job-image-link:hover::after {
  opacity: 1;
}

.job-image-grid img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s;
}

.job-image-link:hover img {
  transform: scale(1.05);
}

.job-card-body {
  padding: 1.25rem;
  display: flex;
  flex-direction: column;
  flex: 1;
}

.timestamp-badge {
  position: absolute;
  top: 0.75rem;
  right: 0.75rem;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 0.35rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 500;
  backdrop-filter: blur(10px);
}

/* Empty State */
.empty-state {
  text-align: center;
  padding: 4rem 2rem;
  background: white;
  border-radius: 12px;
  margin: 2rem 0;
}

.empty-state i {
  font-size: 4rem;
  color: var(--text-light);
  margin-bottom: 1rem;
  opacity: 0.5;
}

.empty-state h3 {
  color: var(--text-dark);
  margin-bottom: 0.5rem;
}

.empty-state p {
  color: var(--text-medium);
}

/* Pagination */
.pagination-wrapper {
  display: flex;
  justify-content: center;
  margin-top: 3rem;
}

.pagination {
  display: flex;
  gap: 0.5rem;
  list-style: none;
  padding: 0;
  margin: 0;
}

.page-item .page-link {
  padding: 0.6rem 1rem;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  color: var(--text-dark);
  text-decoration: none;
  background: white;
  transition: all 0.2s;
  font-weight: 500;
}

.page-item.active .page-link {
  background: var(--primary-color);
  border-color: var(--primary-color);
  color: white;
}

.page-item .page-link:hover {
  background: var(--primary-light);
  border-color: var(--primary-color);
  color: var(--primary-color);
  text-decoration: none;
}

/* Responsive */
@media (max-width: 768px) {
  .hero-header {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .hero-stats {
    width: 100%;
    justify-content: space-around;
  }
  
  .search-bar-compact {
    flex-direction: column;
    align-items: stretch;
  }
  
  .filter-toggle-btn,
  .search-btn-compact {
    width: 100%;
    justify-content: center;
  }
  
  .content-header {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .content-actions {
    width: 100%;
    flex-direction: column;
  }
  
  .sort-dropdown,
  .btn-primary-custom {
    width: 100%;
  }
  
  .job-card-list {
    flex-direction: column;
  }
  
  .job-thumbnail {
    width: 100%;
    height: 200px;
  }
  
  .job-footer-row {
    flex-direction: column;
    gap: 1rem;
    align-items: flex-start;
  }
  
  .job-actions {
    width: 100%;
  }
  
  .btn-view-details {
    width: 100%;
    justify-content: center;
  }
  
  .jobs-grid {
    grid-template-columns: 1fr;
  }
}

/* Loading Animation */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.loading-skeleton {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 1000px 100%;
  animation: shimmer 2s infinite;
}
</style>

<!-- Compact Hero Section -->
<div class="compact-hero">
  <div class="container">
    <div class="hero-header">
      <div class="hero-title-section">
        <h1 id="heroTitle"><i class="bi bi-briefcase-fill"></i> {% trans "Job Opportunities" %}</h1>
        <p id="heroSubtitle">{% blocktrans with count=jobs_count %}Find your next opportunity from {{ count }} available positions{% endblocktrans %}</p>
      </div>
      <div class="hero-stats">
        <div class="stat-item">
          <span class="stat-number" id="statNumber">{{ jobs_count }}</span>
          <span class="stat-label" id="statLabel">{% trans "Active Jobs" %}</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ categories.count }}</span>
          <span class="stat-label">{% trans "Categories" %}</span>
        </div>
      </div>
    </div>
    
    <!-- Minimized Search Bar -->
    <form method="get" action="{% url 'jobs:job_list' %}" id="searchForm">
      <div class="search-bar-compact">
        <i class="bi bi-search" style="color: var(--text-light); font-size: 1.2rem;"></i>
        <input 
          type="text" 
          name="q" 
          value="{{ request.GET.q|default:'' }}" 
          placeholder="{% trans 'Search by job title, skills, or location...' %}" 
          class="search-input-compact"
        >
        <button type="button" class="filter-toggle-btn" id="filterToggle">
          <i class="bi bi-funnel"></i>
          <span>{% trans "Filters" %}</span>
          <i class="bi bi-chevron-down" id="filterChevron"></i>
        </button>
        <button type="submit" class="search-btn-compact">
          <i class="bi bi-search"></i> {% trans "Search" %}
        </button>
      </div>
      
      <!-- Collapsible Filters Panel -->
      <div class="filters-panel" id="filtersPanel">
        <div class="filter-row">
          <div class="filter-group">
            <label><i class="bi bi-tag"></i> {% trans "Category" %}</label>
            <select name="category" class="form-select">
              <option value="">{% trans "All Categories" %}</option>
              {% for category in categories %}
              <option value="{{ category.id }}" {% if request.GET.category == category.id|stringformat:"i" %}selected{% endif %}>
                {{ category.name }}
              </option>
              {% endfor %}
            </select>
          </div>
          <div class="filter-group">
            <label><i class="bi bi-map"></i> {% trans "Barangay" %}</label>
            <input type="text" name="barangay" value="{{ request.GET.barangay|default:'' }}" placeholder="{% trans 'Enter barangay' %}">
          </div>
          <div class="filter-group">
            <label><i class="bi bi-exclamation-triangle"></i> {% trans "Urgency" %}</label>
            <select name="urgency">
              <option value="">{% trans "All Urgency Levels" %}</option>
              <option value="low" {% if request.GET.urgency == 'low' %}selected{% endif %}>{% trans "Low - Flexible timing" %}</option>
              <option value="medium" {% if request.GET.urgency == 'medium' %}selected{% endif %}>{% trans "Medium - Within a week" %}</option>
              <option value="high" {% if request.GET.urgency == 'high' %}selected{% endif %}>{% trans "High - ASAP" %}</option>
            </select>
          </div>
        </div>
        <div class="filter-actions">
          <a href="{% url 'jobs:job_list' %}" class="btn-primary-custom" style="background: var(--text-light);">
            <i class="bi bi-x-circle"></i> {% trans "Clear Filters" %}
          </a>
          <button type="submit" class="btn-primary-custom">
            <i class="bi bi-check-circle"></i> {% trans "Apply Filters" %}
          </button>
        </div>
      </div>
    </form>
  </div>
</div>

<!-- Tab Navigation -->
<div class="tab-nav-wrapper" style="background: white; border-bottom: 2px solid var(--border-color); margin-top: -1px;">
  <div class="container">
    <div class="tab-nav-modern" style="display: flex; gap: 0; padding: 0;">
      <button class="tab-btn-modern active" data-tab="jobs" id="jobsTabBtn" style="flex: 1; padding: 1rem 2rem; border: none; background: none; font-weight: 600; color: var(--text-medium); border-bottom: 3px solid transparent; transition: all 0.3s; cursor: pointer;">
        <i class="bi bi-briefcase"></i> Jobs ({{ jobs_count }})
      </button>
      <button class="tab-btn-modern" data-tab="services" id="servicesTabBtn" style="flex: 1; padding: 1rem 2rem; border: none; background: none; font-weight: 600; color: var(--text-medium); border-bottom: 3px solid transparent; transition: all 0.3s; cursor: pointer;">
        <i class="bi bi-tools"></i> Services ({{ services_count }})
      </button>
    </div>
  </div>
</div>

<!-- Main Content -->
<div class="main-wrapper">
  <div class="container">
    <!-- Jobs Section -->
    <div id="jobsContent" class="tab-content-section">
    <!-- Content Header -->
    <div class="content-header">
      <div class="results-info">
        <div class="results-count">
          <span>{{ jobs.count }}</span> Jobs Found
        </div>
        <div class="view-toggle">
          <button class="view-btn active" data-view="list" id="listViewBtn">
            <i class="bi bi-list-ul"></i>
          </button>
          <button class="view-btn" data-view="grid" id="gridViewBtn">
            <i class="bi bi-grid-3x3-gap"></i>
          </button>
        </div>
      </div>
      
      <div class="content-actions">
        <select class="sort-dropdown" onchange="sortJobs(this.value)">
          <option value="date_desc" {% if request.GET.sort == 'date_desc' or not request.GET.sort %}selected{% endif %}>
            <i class="bi bi-sort-down"></i> Newest First
          </option>
          <option value="date_asc" {% if request.GET.sort == 'date_asc' %}selected{% endif %}>
            <i class="bi bi-sort-up"></i> Oldest First
          </option>
          <option value="budget_desc" {% if request.GET.sort == 'budget_desc' %}selected{% endif %}>
            <i class="bi bi-cash"></i> Highest Budget
          </option>
          <option value="budget_asc" {% if request.GET.sort == 'budget_asc' %}selected{% endif %}>
            <i class="bi bi-cash"></i> Lowest Budget
          </option>
          {% if request.GET.lat and request.GET.lng %}
          <option value="distance" {% if request.GET.sort == 'distance' %}selected{% endif %}>
            <i class="bi bi-geo"></i> Nearest First
          </option>
          {% endif %}
        </select>
        
        {% if user.is_authenticated and user.role == 'client' %}
        <a href="{% url 'jobs:job_create' %}" class="btn-primary-custom">
          <i class="bi bi-plus-circle"></i> Post a Job
        </a>
        {% endif %}
        <button class="btn-primary-custom" style="background: white; color: var(--primary-color); border: 2px solid var(--primary-color);" data-bs-toggle="modal" data-bs-target="#locationModal">
          <i class="bi bi-geo-alt"></i> Set Location
        </button>
        <button onclick="findJobsNearMe()" class="btn-primary-custom" style="background: #28a745; color: white; border: none;">
          <i class="bi bi-crosshair"></i> Jobs Near Me
        </button>
      </div>
      
      <!-- Cached Location Info -->
      <div id="cachedLocationInfo" style="display: none; padding: 0.75rem 1rem; background: #e7f3ff; border: 1px solid #b3d9ff; border-radius: 8px; margin-top: 1rem;">
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <div style="display: flex; align-items: center; gap: 0.5rem;">
            <i class="bi bi-pin-map-fill" style="color: var(--primary-color);"></i>
            <span style="font-size: 0.9rem;">
              <strong>Saved Location:</strong> <span id="cachedLocationText"></span>
            </span>
          </div>
          <button onclick="clearCachedLocation()" class="btn btn-sm btn-outline-danger" style="padding: 0.25rem 0.5rem; font-size: 0.85rem;">
            <i class="bi bi-trash"></i> Clear
          </button>
        </div>
      </div>
      
      <!-- Proximity Filter (shown when location is set) -->
      <div id="proximityFilter" style="display: none; padding: 1rem; background: #f8f9fa; border-radius: 12px; margin-top: 1rem;">
        <div style="display: flex; align-items: center; gap: 1rem;">
          <i class="bi bi-bullseye" style="font-size: 1.5rem; color: var(--primary-color);"></i>
          <div style="flex: 1;">
            <label for="distanceSlider" style="font-weight: 600; margin-bottom: 0.5rem; display: block;">
              Show jobs within: <span id="distanceValue">100</span> km
            </label>
            <input type="range" id="distanceSlider" min="1" max="100" value="100" step="1" 
                   style="width: 100%;" oninput="updateProximityFilter(this.value)" onchange="updateProximityFilter(this.value)">
            <div style="display: flex; justify-content: space-between; font-size: 0.85rem; color: #666;">
              <span>1km</span>
              <span>50km</span>
              <span>100km</span>
            </div>
          </div>
          <button onclick="clearProximityFilter()" class="btn btn-sm btn-outline-secondary">
            <i class="bi bi-x-circle"></i> Clear
          </button>
        </div>
      </div>
    </div>
    
    <!-- Jobs List View (Default) -->
    <div class="jobs-list" id="listView">
      {% for job in jobs %}
      <div class="job-card-list" data-lat="{{ job.location.y }}" data-lng="{{ job.location.x }}">
        <div class="job-thumbnail">
          <a href="{% url 'jobs:job_detail' job.id %}" class="job-thumbnail-link">
            {% if job.jobimage_set.exists %}
            <img src="{{ job.jobimage_set.first.image.url }}" alt="{{ job.title }}" class="img-fluid">
            {% else %}
            <div class="no-image-placeholder">
              <i class="bi bi-image"></i>
              <small>No image</small>
            </div>
            {% endif %}
          </a>
          <div class="timestamp-badge" style="z-index: 2;">
            <i class="bi bi-clock"></i> {{ job.created_at|timesince }} ago
          </div>
        </div>
        
        <div class="job-content">
          <div class="job-header">
            <a href="{% url 'jobs:job_detail' job.id %}" class="job-title-link">
              {{ job.title }}
            </a>
            <div class="job-status-badges">
              {% if job.is_active %}
              <span class="status-badge hiring">
                <i class="bi bi-check-circle-fill"></i> Hiring
              </span>
              {% else %}
              <span class="status-badge closed">
                <i class="bi bi-x-circle-fill"></i> Closed
              </span>
              {% endif %}
              
              {% now "U" as current_timestamp %}
              {% if job.created_at|date:"U"|add:"86400" > current_timestamp %}
              <span class="status-badge new">
                <i class="bi bi-star-fill"></i> New
              </span>
              {% endif %}
            </div>
          </div>
          
          <div class="job-meta-row">
            <div class="meta-item">
              <i class="bi bi-building"></i>
              <span>{{ job.owner.username }}</span>
            </div>
            <div class="meta-item">
              <i class="bi bi-geo-alt-fill"></i>
              <span>{{ job.full_address|default:job.municipality }}</span>
            </div>
            <div class="meta-item">
              <i class="bi bi-tag-fill"></i>
              <span>{{ job.category.name }}</span>
            </div>
            <div class="meta-item">
              <i class="bi bi-calendar-event"></i>
              <span>{{ job.created_at|date:"M d, Y" }} at {{ job.created_at|date:"g:i A" }}</span>
            </div>
            {% if job.expires_at and job.is_active %}
            <div class="meta-item" style="color: var(--warning-color);">
              <i class="bi bi-clock-history"></i>
              <span>Expires {{ job.expires_at|date:"M d" }}</span>
            </div>
            {% endif %}
            <div class="meta-item distance-display" style="color: var(--primary-color); font-weight: 600; display: none;">
              <i class="bi bi-geo-alt-fill"></i>
              <span>Calculating...</span>
            </div>
          </div>
          
          <p class="job-description-preview">
            {{ job.description|truncatechars:180 }}
          </p>
          
          <div class="job-footer-row">
            <div class="job-budget">
              <i class="bi bi-cash-stack"></i> ‚Ç±{{ job.budget|floatformat:0 }}
            </div>
            <div class="job-actions">
              <a href="{% url 'jobs:job_detail' job.id %}" class="btn-view-details">
                View Details <i class="bi bi-arrow-right"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="empty-state">
        <i class="bi bi-inbox"></i>
        <h3>No Jobs Found</h3>
        <p>Try adjusting your search criteria or check back later for new opportunities.</p>
      </div>
      {% endfor %}
    </div>
    
    <!-- Jobs Grid View (Hidden by default) -->
    <div class="jobs-grid" id="gridView" style="display: none;">
      {% for job in jobs %}
      <div class="job-card-grid" data-lat="{{ job.location.y }}" data-lng="{{ job.location.x }}">
        <div class="job-image-grid">
          <a href="{% url 'jobs:job_detail' job.id %}" class="job-image-link">
            {% if job.jobimage_set.exists %}
            <img src="{{ job.jobimage_set.first.image.url }}" alt="{{ job.title }}" class="img-fluid">
            {% else %}
            <div class="no-image-placeholder">
              <i class="bi bi-image"></i>
              <small>No image</small>
            </div>
            {% endif %}
          </a>
          <div class="timestamp-badge" style="z-index: 2;">
            <i class="bi bi-clock"></i> {{ job.created_at|timesince }} ago
          </div>
        </div>
        
        <div class="job-card-body">
          <div class="job-status-badges" style="margin-bottom: 0.75rem;">
            {% if job.is_active %}
            <span class="status-badge hiring">
              <i class="bi bi-check-circle-fill"></i> Hiring
            </span>
            {% else %}
            <span class="status-badge closed">
              <i class="bi bi-x-circle-fill"></i> Closed
            </span>
            {% endif %}
          </div>
          
          <a href="{% url 'jobs:job_detail' job.id %}" class="job-title-link" style="font-size: 1.1rem;">
            {{ job.title|truncatechars:50 }}
          </a>
          
          <div class="job-meta-row" style="margin-top: 0.75rem; margin-bottom: 0.75rem;">
            <div class="meta-item">
              <i class="bi bi-geo-alt-fill"></i>
              <span>{{ job.full_address|default:job.municipality }}</span>
            </div>
            <div class="meta-item">
              <i class="bi bi-calendar-event"></i>
              <span>{{ job.created_at|date:"M d, Y" }}</span>
            </div>
            {% if job.expires_at and job.is_active %}
            <div class="meta-item" style="color: var(--warning-color);">
              <i class="bi bi-clock-history"></i>
              <span>Exp: {{ job.expires_at|date:"M d" }}</span>
            </div>
            {% endif %}
            <div class="meta-item distance-display" style="color: var(--primary-color); font-weight: 600; display: none;">
              <i class="bi bi-geo-alt-fill"></i>
              <span>Calculating...</span>
            </div>
          </div>
          
          <p class="job-description-preview" style="font-size: 0.85rem;">
            {{ job.description|truncatechars:100 }}
          </p>
          
          <div class="job-footer-row">
            <div class="job-budget" style="font-size: 1.25rem;">
              ‚Ç±{{ job.budget|floatformat:0 }}
            </div>
            <a href="{% url 'jobs:job_detail' job.id %}" class="btn-view-details" style="padding: 0.5rem 1rem; font-size: 0.85rem;">
              View <i class="bi bi-arrow-right"></i>
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    
    <!-- Pagination -->
    {% if is_paginated %}
    <div class="pagination-wrapper">
      <nav>
        <ul class="pagination">
          {% if page_obj.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value|urlencode }}&{% endif %}{% endfor %}page=1">
              <i class="bi bi-chevron-double-left"></i>
            </a>
          </li>
          <li class="page-item">
            <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value|urlencode }}&{% endif %}{% endfor %}page={{ page_obj.previous_page_number }}">
              <i class="bi bi-chevron-left"></i>
            </a>
          </li>
          {% endif %}
          
          {% for num in page_obj.paginator.page_range %}
          {% if page_obj.number == num %}
          <li class="page-item active">
            <span class="page-link">{{ num }}</span>
          </li>
          {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
          <li class="page-item">
            <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value|urlencode }}&{% endif %}{% endfor %}page={{ num }}">{{ num }}</a>
          </li>
          {% endif %}
          {% endfor %}
          
          {% if page_obj.has_next %}
          <li class="page-item">
            <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value|urlencode }}&{% endif %}{% endfor %}page={{ page_obj.next_page_number }}">
              <i class="bi bi-chevron-right"></i>
            </a>
          </li>
          <li class="page-item">
            <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value|urlencode }}&{% endif %}{% endfor %}page={{ page_obj.paginator.num_pages }}">
              <i class="bi bi-chevron-double-right"></i>
            </a>
          </li>
          {% endif %}
        </ul>
      </nav>
    </div>
    {% endif %}
    </div>
    <!-- End Jobs Section -->
    
    <!-- Services Section -->
    <div id="servicesContent" class="tab-content-section" style="display: none;">
      <!-- Content Header -->
      <div class="content-header">
        <div class="results-info">
          <div class="results-count">
            <span>{{ services.count }}</span> Services Found
          </div>
          <div class="view-toggle">
            <button class="view-btn active" data-view="list" id="servicesListViewBtn">
              <i class="bi bi-list-ul"></i>
            </button>
            <button class="view-btn" data-view="grid" id="servicesGridViewBtn">
              <i class="bi bi-grid-3x3-gap"></i>
            </button>
          </div>
        </div>
        
        <div class="content-actions">
          {% if user.is_authenticated and user.role == 'worker' %}
          <a href="{% url 'services:servicepost_create' %}" class="btn-primary-custom">
            <i class="bi bi-plus-circle"></i> Post a Service
          </a>
          {% endif %}
          <button class="btn-primary-custom" style="background: white; color: var(--primary-color); border: 2px solid var(--primary-color);" data-bs-toggle="modal" data-bs-target="#locationModal">
            <i class="bi bi-geo-alt"></i> Set Location
          </button>
        </div>
      </div>
      
      <!-- Services List View -->
      <div id="servicesListView" class="jobs-list">
        {% for service in services %}
        <div class="job-card-list">
          <div class="job-thumbnail">
            <a href="{{ service.get_absolute_url }}" class="job-thumbnail-link">
              {% with service.images.first as service_image %}
              {% if service_image %}
              <img src="{{ service_image.image.url }}" alt="{{ service.headline }}" class="img-fluid">
              {% else %}
              <div class="no-image-placeholder">
                <i class="bi bi-tools"></i>
                <small>No image</small>
              </div>
              {% endif %}
              {% endwith %}
            </a>
            <div class="timestamp-badge" style="z-index: 2;">
              <i class="bi bi-clock"></i> {{ service.created_at|timesince }} ago
            </div>
          </div>
          
          <div class="job-content">
            <div class="job-header">
              <a href="{{ service.get_absolute_url }}" class="job-title-link">
                {{ service.headline }}
              </a>
              <div class="job-status-badges">
                <span class="status-badge hiring" style="background: rgba(59, 130, 246, 0.1); color: var(--primary-color);">
                  <i class="bi bi-tools"></i> Service
                </span>
              </div>
            </div>
            
            <div class="job-meta-row">
              <div class="meta-item">
                <i class="bi bi-person-circle"></i>
                <span>{{ service.user.username }}</span>
              </div>
              <div class="meta-item">
                <i class="bi bi-calendar-event"></i>
                <span>{{ service.created_at|date:"M d, Y" }} at {{ service.created_at|date:"g:i A" }}</span>
              </div>
              {% if service.distance %}
              <div class="meta-item" style="color: var(--success-color);">
                <i class="bi bi-geo"></i>
                <span>{{ service.distance.km|floatformat:1 }} km away</span>
              </div>
              {% endif %}
            </div>
            
            <p class="job-description-preview">
              {{ service.description|truncatechars:180 }}
            </p>
            
            <div class="job-footer-row">
              <div class="job-budget" style="font-size: 1.1rem; color: var(--primary-color);">
                <i class="bi bi-tools"></i> Professional Service
              </div>
              <div class="job-actions">
                <a href="{{ service.get_absolute_url }}" class="btn-view-details">
                  View Details <i class="bi bi-arrow-right"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
        {% empty %}
        <div class="empty-state">
          <i class="bi bi-tools"></i>
          <h3>No Services Found</h3>
          <p>Check back later for new service opportunities.</p>
        </div>
        {% endfor %}
      </div>
      
      <!-- Services Grid View -->
      <div id="servicesGridView" class="jobs-grid" style="display: none;">
        {% for service in services %}
        <div class="job-card-grid">
          <div class="job-thumbnail-grid">
            <a href="{{ service.get_absolute_url }}" class="job-thumbnail-link">
              {% with service.images.first as service_image %}
              {% if service_image %}
              <img src="{{ service_image.image.url }}" alt="{{ service.headline }}" class="img-fluid">
              {% else %}
              <div class="no-image-placeholder">
                <i class="bi bi-tools"></i>
                <small>No image</small>
              </div>
              {% endif %}
              {% endwith %}
            </a>
            <div class="timestamp-badge-grid">
              <i class="bi bi-clock"></i> {{ service.created_at|timesince }} ago
            </div>
          </div>
          
          <div class="job-content-grid">
            <span class="status-badge hiring" style="background: rgba(59, 130, 246, 0.1); color: var(--primary-color);">
              <i class="bi bi-tools"></i> Service
            </span>
            
            <a href="{{ service.get_absolute_url }}" class="job-title-link-grid">
              {{ service.headline }}
            </a>
            
            <div class="job-meta-grid">
              <div class="meta-item">
                <i class="bi bi-person-circle"></i>
                <span>{{ service.user.username }}</span>
              </div>
              <div class="meta-item">
                <i class="bi bi-calendar-event"></i>
                <span>{{ service.created_at|date:"M d, Y" }}</span>
              </div>
            </div>
            
            <p class="job-description-preview-grid">
              {{ service.description|truncatechars:100 }}
            </p>
            
            <a href="{{ service.get_absolute_url }}" class="btn-view-details-grid">
              View Details <i class="bi bi-arrow-right"></i>
            </a>
          </div>
        </div>
        {% empty %}
        <div class="empty-state">
          <i class="bi bi-tools"></i>
          <h3>No Services Found</h3>
          <p>Check back later for new service opportunities.</p>
        </div>
        {% endfor %}
      </div>
    </div>
    <!-- End Services Section -->
    
  </div>
</div>

<style>
.tab-btn-modern.active {
  color: var(--primary-color) !important;
  border-bottom-color: var(--primary-color) !important;
}

.tab-btn-modern:hover {
  color: var(--primary-color);
  background: var(--primary-light);
}
</style>

<script>
// Tab Switching
const jobsTabBtn = document.getElementById('jobsTabBtn');
const servicesTabBtn = document.getElementById('servicesTabBtn');
const jobsContent = document.getElementById('jobsContent');
const servicesContent = document.getElementById('servicesContent');
const heroTitle = document.getElementById('heroTitle');
const heroSubtitle = document.getElementById('heroSubtitle');
const statNumber = document.getElementById('statNumber');
const statLabel = document.getElementById('statLabel');

jobsTabBtn.addEventListener('click', function() {
  jobsTabBtn.classList.add('active');
  servicesTabBtn.classList.remove('active');
  jobsContent.style.display = 'block';
  servicesContent.style.display = 'none';
  
  heroTitle.innerHTML = '<i class="bi bi-briefcase-fill"></i> Job Opportunities';
  heroSubtitle.textContent = 'Find your next opportunity from {{ jobs_count }} available positions';
  statNumber.textContent = '{{ jobs_count }}';
  statLabel.textContent = 'Active Jobs';
  
  // Update URL
  const url = new URL(window.location.href);
  url.searchParams.set('tab', 'jobs');
  window.history.pushState({}, '', url);
});

servicesTabBtn.addEventListener('click', function() {
  servicesTabBtn.classList.add('active');
  jobsTabBtn.classList.remove('active');
  servicesContent.style.display = 'block';
  jobsContent.style.display = 'none';
  
  heroTitle.innerHTML = '<i class="bi bi-tools"></i> Professional Services';
  heroSubtitle.textContent = 'Discover skilled professionals ready to help';
  statNumber.textContent = '{{ services.count }}';
  statLabel.textContent = 'Services';
  
  // Update URL
  const url = new URL(window.location.href);
  url.searchParams.set('tab', 'services');
  window.history.pushState({}, '', url);
});

// Check URL parameter on load
// Define urlParams globally for use in other functions
const urlParams = new URLSearchParams(window.location.search);
const activeTab = urlParams.get('tab');
if (activeTab === 'services') {
  servicesTabBtn.click();
}

// Filter Toggle
document.getElementById('filterToggle').addEventListener('click', function() {
  const panel = document.getElementById('filtersPanel');
  const chevron = document.getElementById('filterChevron');
  const button = this;
  
  if (panel.classList.contains('show')) {
    panel.classList.remove('show');
    chevron.classList.remove('bi-chevron-up');
    chevron.classList.add('bi-chevron-down');
    button.classList.remove('active');
  } else {
    panel.classList.add('show');
    chevron.classList.remove('bi-chevron-down');
    chevron.classList.add('bi-chevron-up');
    button.classList.add('active');
  }
});

// View Toggle
const listViewBtn = document.getElementById('listViewBtn');
const gridViewBtn = document.getElementById('gridViewBtn');
const listView = document.getElementById('listView');
const gridView = document.getElementById('gridView');

listViewBtn.addEventListener('click', function() {
  listView.style.display = 'flex';
  gridView.style.display = 'none';
  listViewBtn.classList.add('active');
  gridViewBtn.classList.remove('active');
  localStorage.setItem('jobViewPreference', 'list');
});

gridViewBtn.addEventListener('click', function() {
  listView.style.display = 'none';
  gridView.style.display = 'grid';
  gridViewBtn.classList.add('active');
  listViewBtn.classList.remove('active');
  localStorage.setItem('jobViewPreference', 'grid');
});

// Restore view preference
const savedView = localStorage.getItem('jobViewPreference');
if (savedView === 'grid') {
  gridViewBtn.click();
}

// Services View Toggle
const servicesListViewBtn = document.getElementById('servicesListViewBtn');
const servicesGridViewBtn = document.getElementById('servicesGridViewBtn');
const servicesListView = document.getElementById('servicesListView');
const servicesGridView = document.getElementById('servicesGridView');

if (servicesListViewBtn && servicesGridViewBtn) {
  servicesListViewBtn.addEventListener('click', function() {
    servicesListView.style.display = 'flex';
    servicesGridView.style.display = 'none';
    servicesListViewBtn.classList.add('active');
    servicesGridViewBtn.classList.remove('active');
    localStorage.setItem('servicesViewPreference', 'list');
  });

  servicesGridViewBtn.addEventListener('click', function() {
    servicesListView.style.display = 'none';
    servicesGridView.style.display = 'grid';
    servicesGridViewBtn.classList.add('active');
    servicesListViewBtn.classList.remove('active');
    localStorage.setItem('servicesViewPreference', 'grid');
  });

  // Restore services view preference
  const savedServicesView = localStorage.getItem('servicesViewPreference');
  if (savedServicesView === 'grid') {
    servicesGridViewBtn.click();
  }
}

// Sort Function
function sortJobs(sortValue) {
  const url = new URL(window.location.href);
  url.searchParams.set('sort', sortValue);
  url.searchParams.set('page', '1'); // Reset to first page
  window.location.href = url.toString();
}

// Clean modal input handlers
function handleModalKeydown(event) {
    if (event.key === 'Enter') {
        event.preventDefault();
        event.stopPropagation();
        applyManualLocation();
        return false;
    }
}

function handleModalKeypress(event) {
    if (event.key === 'Enter') {
        event.preventDefault();
        event.stopPropagation();
        return false;
    }
}

// Clean Location Functions
function getCurrentLocation() {
    const statusDiv = document.getElementById('locationStatus');
    const activeTab = new URLSearchParams(window.location.search).get('tab') || 'jobs';
    
    statusDiv.style.display = 'block';
    statusDiv.innerHTML = '<div class="alert alert-info"><i class="bi bi-arrow-repeat spin"></i> <span>Getting your location...</span></div>';

    if (!navigator.geolocation) {
        statusDiv.innerHTML = '<div class="alert alert-danger"><i class="bi bi-exclamation-triangle"></i> <span>Geolocation is not supported by this browser.</span></div>';
        return;
    }

    navigator.geolocation.getCurrentPosition(
        function(position) {
            // Cache GPS location
            const locationData = {
                municipality: 'GPS Location',
                barangay: '',
                lat: position.coords.latitude,
                lng: position.coords.longitude,
                timestamp: Date.now()
            };
            localStorage.setItem('userLocation', JSON.stringify(locationData));
            console.log('GPS location cached:', locationData);
            
            const url = new URL(window.location);
            url.searchParams.set('lat', position.coords.latitude);
            url.searchParams.set('lng', position.coords.longitude);
            url.searchParams.set('tab', activeTab);
            url.searchParams.delete('municipality');
            url.searchParams.delete('barangay');
            
            statusDiv.innerHTML = '<div class="alert alert-success"><i class="bi bi-check-circle"></i> <span>Location saved successfully!</span></div>';
            
            setTimeout(() => {
                const modal = bootstrap.Modal.getInstance(document.getElementById('locationModal'));
                if (modal) modal.hide();
                window.location.href = url.toString();
            }, 1500);
        },
        function(error) {
            const messages = {
                1: 'Please allow location access.',
                2: 'Location information unavailable.',
                3: 'Location request timed out.'
            };
            const errorMessage = messages[error.code] || 'An unknown error occurred.';
            statusDiv.innerHTML = `<div class="alert alert-danger"><i class="bi bi-exclamation-triangle"></i> <span>Unable to get your location. ${errorMessage}</span></div>`;
        },
        { enableHighAccuracy: true, timeout: 15000, maximumAge: 0 }
    );
}

function applyManualLocation() {
    const city = document.getElementById('manualCity').value.trim();
    const barangay = document.getElementById('manualBarangay').value.trim();
    const activeTab = new URLSearchParams(window.location.search).get('tab') || 'jobs';
    const statusDiv = document.getElementById('locationStatus');
    
    if (!city) {
        alert('Please enter a city or municipality.');
        return;
    }
    
    // Show processing message
    statusDiv.style.display = 'block';
    statusDiv.innerHTML = '<div class="alert alert-info"><i class="bi bi-arrow-repeat spin"></i> <span>Converting location to GPS coordinates...</span></div>';
    
    // Check if we can convert to GPS coordinates
    const locationKey = city.toLowerCase();
    const coords = LocationManager.getCityCoordinates(locationKey);
    
    if (coords) {
        // Successfully found GPS coordinates
        // Cache the location in localStorage
        const locationData = {
            municipality: city,
            barangay: barangay || '',
            lat: coords.lat,
            lng: coords.lng,
            timestamp: Date.now()
        };
        localStorage.setItem('userLocation', JSON.stringify(locationData));
        console.log('Location cached:', locationData);
        
        statusDiv.innerHTML = `<div class="alert alert-success"><i class="bi bi-check-circle"></i> <span>Location saved: ${city}${barangay ? ' - ' + barangay : ''}</span></div>`;
        
        setTimeout(() => {
            const url = new URL(window.location);
            url.searchParams.set('municipality', city);
            if (barangay) {
                url.searchParams.set('barangay', barangay);
            }
            url.searchParams.delete('lat');
            url.searchParams.delete('lng');
            url.searchParams.set('tab', activeTab);
            
            const modal = bootstrap.Modal.getInstance(document.getElementById('locationModal'));
            if (modal) modal.hide();
            window.location.href = url.toString();
        }, 1000);
    } else {
        // Location not found in our database
        statusDiv.innerHTML = `<div class="alert alert-warning"><i class="bi bi-exclamation-triangle"></i> <span>Location "${city}" not found in database. Please try a nearby major city or use GPS location.</span></div>`;
        
        setTimeout(() => {
            statusDiv.style.display = 'none';
        }, 3000);
    }
}

// Quick Search: Jobs Near Me
function findJobsNearMe() {
    const activeTab = new URLSearchParams(window.location.search).get('tab') || 'jobs';
    
    if (!navigator.geolocation) {
        alert('Geolocation is not supported by your browser.');
        return;
    }
    
    // Show loading state
    const btn = event.target.closest('button');
    const originalContent = btn.innerHTML;
    btn.disabled = true;
    btn.innerHTML = '<i class="bi bi-arrow-repeat spin"></i> Getting location...';
    
    navigator.geolocation.getCurrentPosition(
        function(position) {
            // Cache GPS location
            const locationData = {
                municipality: 'GPS Location',
                barangay: '',
                lat: position.coords.latitude,
                lng: position.coords.longitude,
                timestamp: Date.now()
            };
            localStorage.setItem('userLocation', JSON.stringify(locationData));
            console.log('GPS location cached:', locationData);
            
            const url = new URL(window.location);
            url.searchParams.set('lat', position.coords.latitude);
            url.searchParams.set('lng', position.coords.longitude);
            url.searchParams.set('sort', 'distance');
            url.searchParams.set('tab', activeTab);
            url.searchParams.delete('municipality');
            url.searchParams.delete('barangay');
            window.location.href = url.toString();
        },
        function(error) {
            btn.disabled = false;
            btn.innerHTML = originalContent;
            alert('Unable to get your location. Please allow location access or use "Set Location" instead.');
        },
        { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
    );
}

// Proximity Filter Functions
let currentMaxDistance = 100;

function updateProximityFilter(distance) {
    currentMaxDistance = parseFloat(distance);
    document.getElementById('distanceValue').textContent = currentMaxDistance;
    filterJobsByDistance();
    console.log(`Filtering jobs within ${currentMaxDistance}km`);
}

function filterJobsByDistance() {
    const urlParams = new URLSearchParams(window.location.search);
    const userLat = parseFloat(urlParams.get('lat'));
    const userLng = parseFloat(urlParams.get('lng'));
    const municipality = urlParams.get('municipality');
    const cachedLocation = localStorage.getItem('userLocation');
    
    if (!userLat && !userLng && !municipality && !cachedLocation) {
        console.log('No location set, skipping filter');
        return; // No location set
    }
    
    // Find only job cards in the ACTIVE view (list or grid) that have location data
    const gridViewElement = document.getElementById('gridView');
    const isGridView = gridViewElement && gridViewElement.style.display !== 'none';
    const viewSelector = isGridView ? '.job-card-grid[data-lat][data-lng]' : '.job-card-list[data-lat][data-lng]';
    const jobCards = document.querySelectorAll(viewSelector);
    let hiddenCount = 0;
    let totalCount = 0;
    
    console.log(`=== FILTER DEBUG ===`);
    console.log(`Active view: ${isGridView ? 'Grid' : 'List'}`);
    console.log(`Current max distance: ${currentMaxDistance}km`);
    console.log(`Found ${jobCards.length} job cards with location data to filter`);
    console.log(`URL params: lat=${userLat}, lng=${userLng}, municipality=${municipality}`);
    console.log(`Has cached location: ${!!cachedLocation}`);
    
    jobCards.forEach((card, index) => {
        const distanceDisplay = card.querySelector('.distance-display span');
        
        if (distanceDisplay && distanceDisplay.textContent) {
            const distanceText = distanceDisplay.textContent.trim();
            
            // Skip if still calculating
            if (distanceText === 'Calculating...') {
                return;
            }
            
            totalCount++;
            console.log(`Processing card with distance: "${distanceText}"`);
            
            const distanceMatch = distanceText.match(/(\d+\.?\d*)/);
            
            if (distanceMatch) {
                let distance = parseFloat(distanceMatch[1]);
                
                // Convert meters to km if needed
                if (distanceText.toLowerCase().includes('m away') && !distanceText.toLowerCase().includes('km')) {
                    distance = distance / 1000;
                }
                
                console.log(`  Parsed distance: ${distance}km, Max allowed: ${currentMaxDistance}km, Show: ${distance <= currentMaxDistance}`);
                
                if (distance <= currentMaxDistance) {
                    card.style.display = '';
                    card.style.opacity = '1';
                } else {
                    card.style.display = 'none';
                    card.style.opacity = '0';
                    hiddenCount++;
                    console.log(`  Hidden: ${distance}km > ${currentMaxDistance}km`);
                }
            } else {
                console.warn(`  Could not parse distance from: "${distanceText}"`);
            }
        }
    });
    
    console.log(`Filtered: ${hiddenCount} hidden, ${totalCount - hiddenCount} shown`);
    
    // Show message if jobs are hidden
    updateFilterMessage(hiddenCount, totalCount);
}

function updateFilterMessage(hiddenCount, totalCount) {
    let messageDiv = document.getElementById('proximityFilterMessage');
    if (!messageDiv) {
        messageDiv = document.createElement('div');
        messageDiv.id = 'proximityFilterMessage';
        messageDiv.style.cssText = 'padding: 0.75rem; background: #fff3cd; border: 1px solid #ffc107; border-radius: 8px; margin-top: 1rem; text-align: center;';
        document.getElementById('proximityFilter').after(messageDiv);
    }
    
    if (hiddenCount > 0) {
        messageDiv.innerHTML = `<i class="bi bi-info-circle"></i> Showing ${totalCount - hiddenCount} job(s) within ${currentMaxDistance}km ‚Ä¢ ${hiddenCount} hidden beyond radius`;
        messageDiv.style.display = 'block';
    } else if (totalCount > 0) {
        messageDiv.innerHTML = `<i class="bi bi-check-circle"></i> Showing all ${totalCount} job(s) within ${currentMaxDistance}km radius`;
        messageDiv.style.display = 'block';
    } else {
        messageDiv.style.display = 'none';
    }
}

function clearProximityFilter() {
    currentMaxDistance = 100;
    document.getElementById('distanceSlider').value = 100;
    document.getElementById('distanceValue').textContent = 100;
    
    // Clear both list and grid view cards
    const allJobCards = document.querySelectorAll('.job-card-list[data-lat][data-lng], .job-card-grid[data-lat][data-lng]');
    allJobCards.forEach(card => {
        card.style.display = '';
        card.style.opacity = '1';
    });
    
    const messageDiv = document.getElementById('proximityFilterMessage');
    if (messageDiv) {
        messageDiv.style.display = 'none';
    }
    
    // Re-filter to show all
    filterJobsByDistance();
}

function clearCachedLocation() {
    if (confirm('Are you sure you want to clear your saved location?')) {
        localStorage.removeItem('userLocation');
        document.getElementById('cachedLocationInfo').style.display = 'none';
        console.log('Cached location cleared');
        
        // Reload page to remove distance calculations
        const url = new URL(window.location);
        url.searchParams.delete('municipality');
        url.searchParams.delete('barangay');
        url.searchParams.delete('lat');
        url.searchParams.delete('lng');
        window.location.href = url.toString();
    }
}

function showCachedLocationInfo() {
    const cached = localStorage.getItem('userLocation');
    if (cached) {
        try {
            const locationData = JSON.parse(cached);
            let locationText;
            
            if (locationData.municipality === 'GPS Location') {
                locationText = `GPS (${locationData.lat.toFixed(4)}, ${locationData.lng.toFixed(4)})`;
            } else {
                locationText = locationData.barangay 
                    ? `${locationData.municipality} - ${locationData.barangay}`
                    : locationData.municipality;
            }
            
            document.getElementById('cachedLocationText').textContent = locationText;
            document.getElementById('cachedLocationInfo').style.display = 'block';
        } catch (e) {
            console.error('Error displaying cached location:', e);
        }
    }
}
</script>

<!-- Location Modal -->
<div class="modal fade" id="locationModal" tabindex="-1" aria-labelledby="locationModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content" style="border-radius: 12px; border: none;">
      <div class="modal-header" style="background: var(--gradient-primary); color: white; border: none;">
        <h5 class="modal-title" id="locationModalLabel">
          <i class="bi bi-geo-alt"></i> Set Your Location
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" style="padding: 2rem;">
        <p style="color: var(--text-medium); margin-bottom: 1.5rem;">Choose how you'd like to set your location to find opportunities near you.</p>
        
        <div style="display: flex; flex-direction: column; gap: 1rem;">
          <button type="button" onclick="getCurrentLocation()" style="display: flex; align-items: center; gap: 1rem; padding: 1rem; border: 2px solid var(--border-color); border-radius: 10px; background: white; cursor: pointer; transition: all 0.2s;">
            <div style="width: 50px; height: 50px; background: var(--gradient-primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
              <i class="bi bi-crosshairs" style="font-size: 1.5rem;"></i>
            </div>
            <div style="text-align: left; flex: 1;">
              <h6 style="margin: 0 0 0.25rem 0; color: var(--text-dark); font-weight: 600;">Use Current Location</h6>
              <small style="color: var(--text-light);">Automatically detect your location</small>
            </div>
          </button>
          
          <div style="display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; border: 2px solid var(--border-color); border-radius: 10px; background: white;">
            <div style="width: 50px; height: 50px; background: var(--gradient-primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
              <i class="bi bi-pencil" style="font-size: 1.5rem;"></i>
            </div>
            <div style="flex: 1;">
              <h6 style="margin: 0 0 0.75rem 0; color: var(--text-dark); font-weight: 600;">Enter Manually</h6>
              <div style="margin: 0; padding: 0;">
                <input type="text" class="form-control mb-2" id="manualCity" placeholder="Enter city/municipality" style="border: 1px solid var(--border-color); border-radius: 8px; padding: 0.6rem;" autocomplete="off">
                <input type="text" class="form-control" id="manualBarangay" placeholder="Enter barangay (optional)" style="border: 1px solid var(--border-color); border-radius: 8px; padding: 0.6rem;" autocomplete="off">
              </div>
            </div>
          </div>
        </div>
        
        <div id="locationStatus" style="margin-top: 1rem; display: none;"></div>
      </div>
      <div class="modal-footer" style="border: none; padding: 1rem 2rem;">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="border-radius: 8px;">{% trans "Cancel" %}</button>
        <button type="button" class="btn btn-primary" onclick="applyManualLocation()" style="background: var(--gradient-primary); border: none; border-radius: 8px;">Apply Location</button>
      </div>
    </div>
  </div>
</div>

<style>
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
.spin {
  animation: spin 1s linear infinite;
}
</style>

<script>
// LocationManager - Auto-detect and display distances
const LocationManager = {
    CACHE_KEY: 'trabaholink_user_location',
    CACHE_DURATION: 24 * 60 * 60 * 1000, // 24 hours
    
    getCachedLocation() {
        const cached = localStorage.getItem(this.CACHE_KEY);
        if (!cached) return null;
        
        try {
            const location = JSON.parse(cached);
            if (Date.now() - location.timestamp > this.CACHE_DURATION) {
                localStorage.removeItem(this.CACHE_KEY);
                return null;
            }
            return location;
        } catch (e) {
            return null;
        }
    },
    
    async getCurrentLocation() {
        return new Promise((resolve, reject) => {
            if (!navigator.geolocation) {
                reject(new Error('Geolocation not supported'));
                return;
            }
            
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const location = {
                        latitude: position.coords.latitude,
                        longitude: position.coords.longitude,
                        timestamp: Date.now()
                    };
                    localStorage.setItem(this.CACHE_KEY, JSON.stringify(location));
                    resolve(location);
                },
                (error) => {
                    console.log('Location error:', error.message);
                    reject(error);
                },
                { 
                    enableHighAccuracy: false,
                    timeout: 10000,
                    maximumAge: 300000 // 5 minutes
                }
            );
        });
    },
    
    calculateDistance(lat1, lon1, lat2, lon2) {
        const R = 6371; // Earth's radius in km
        const dLat = (lat2 - lat1) * Math.PI / 180;
        const dLon = (lon2 - lon1) * Math.PI / 180;
        const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                  Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                  Math.sin(dLon/2) * Math.sin(dLon/2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        return R * c;
    },
    
    formatDistance(km) {
        if (km < 1) {
            return Math.round(km * 1000) + 'm away';
        } else if (km < 10) {
            return km.toFixed(1) + 'km away';
        } else {
            return Math.round(km) + 'km away';
        }
    },
    
    initializeDistances() {
        const urlParams = new URLSearchParams(window.location.search);
        const userLat = parseFloat(urlParams.get('lat'));
        const userLng = parseFloat(urlParams.get('lng'));
        const municipality = urlParams.get('municipality');
        
        // GPS coordinates from URL (highest priority)
        if (userLat && userLng && !isNaN(userLat) && !isNaN(userLng)) {
            console.log('Using GPS coordinates from URL');
            this.updateDistances({ latitude: userLat, longitude: userLng });
            return;
        }
        
        // Manual location from URL (second priority)
        if (municipality) {
            const barangay = urlParams.get('barangay');
            let locationKey = municipality.toLowerCase().trim();
            
            // If barangay is provided, combine them in the format expected by getCityCoordinates
            if (barangay) {
                locationKey = `${municipality.toLowerCase().trim()} - ${barangay.toLowerCase().trim()}`;
            }
            
            const coords = this.getCityCoordinates(locationKey);
            if (coords) {
                console.log(`Using coordinates for ${locationKey}: (${coords.lat}, ${coords.lng})`);
                this.updateDistances({ latitude: coords.lat, longitude: coords.lng });
                return;
            } else {
                console.warn(`Coordinates not found for: ${locationKey}`);
            }
        }
        
        // Try cached location (third priority - for pages without location params)
        const cachedLocation = this.getCachedManualLocation();
        if (cachedLocation) {
            console.log('Using cached location:', cachedLocation);
            this.updateDistances({ latitude: cachedLocation.lat, longitude: cachedLocation.lng });
            return;
        }
        
        console.log('No location data available');
    },
    
    getCachedManualLocation() {
        try {
            const cached = localStorage.getItem('userLocation');
            if (cached) {
                const locationData = JSON.parse(cached);
                // Check if cache is less than 30 days old
                const daysSinceCache = (Date.now() - locationData.timestamp) / (1000 * 60 * 60 * 24);
                if (daysSinceCache < 30) {
                    return locationData;
                } else {
                    // Clear expired cache
                    localStorage.removeItem('userLocation');
                }
            }
        } catch (e) {
            console.error('Error reading cached location:', e);
        }
        return null;
    },
    
    getCityCoordinates(cityName) {
        // Comprehensive coordinates database with 6 decimal places (matching backend)
        const cities = {
            // Metro Manila
            'manila': { lat: 14.599512, lng: 120.984222 },
            'quezon city': { lat: 14.676041, lng: 121.043700 },
            'makati': { lat: 14.554729, lng: 121.024445 },
            'pasig': { lat: 14.576417, lng: 121.085098 },
            'taguig': { lat: 14.517637, lng: 121.050935 },
            'pasay': { lat: 14.537840, lng: 120.989639 },
            'paranaque': { lat: 14.479322, lng: 121.019817 },
            'las pinas': { lat: 14.449910, lng: 120.976158 },
            'muntinlupa': { lat: 14.383240, lng: 121.040863 },
            'marikina': { lat: 14.650703, lng: 121.102905 },
            'valenzuela': { lat: 14.700024, lng: 120.983299 },
            'caloocan': { lat: 14.648813, lng: 120.966835 },
            'malabon': { lat: 14.658348, lng: 120.956726 },
            'navotas': { lat: 14.669125, lng: 120.947189 },
            'san juan': { lat: 14.601909, lng: 121.035538 },
            'mandaluyong': { lat: 14.579399, lng: 121.035905 },
            
            // Cavite
            'bacoor': { lat: 14.431095, lng: 120.968096 },
            'imus': { lat: 14.429741, lng: 120.937028 },
            'dasmarinas': { lat: 14.400415, lng: 120.985887 },
            'dasmari√±as': { lat: 14.400415, lng: 120.985887 },
            'cavite city': { lat: 14.479142, lng: 120.897897 },
            'general trias': { lat: 14.386906, lng: 120.881014 },
            'trece martires': { lat: 14.281448, lng: 120.867188 },
            'tagaytay': { lat: 14.115912, lng: 120.960219 },
            'silang': { lat: 14.231042, lng: 120.976951 },
            
            // Rizal
            'antipolo': { lat: 14.593069, lng: 121.180027 },
            'cainta': { lat: 14.578293, lng: 121.122215 },
            'taytay': { lat: 14.557601, lng: 121.132437 },
            'binangonan': { lat: 14.464722, lng: 121.192502 },
            'rodriguez': { lat: 14.713628, lng: 121.107524 },
            'montalban': { lat: 14.713628, lng: 121.107524 },
            'san mateo': { lat: 14.696908, lng: 121.121895 },
            
            // Laguna
            'calamba': { lat: 14.211651, lng: 121.165314 },
            'bi√±an': { lat: 14.337783, lng: 121.080849 },
            'santa rosa': { lat: 14.312336, lng: 111.376 },
            'cabuyao': { lat: 14.278415, lng: 121.124573 },
            'san pedro': { lat: 14.355304, lng: 121.017847 },
            'los ba√±os': { lat: 14.169908, lng: 121.220631 },
            
            // Bulacan
            'malolos': { lat: 14.843252, lng: 120.811399 },
            'meycauayan': { lat: 14.735024, lng: 120.953308 },
            'san jose del monte': { lat: 14.813612, lng: 121.045301 },
            'santa maria': { lat: 14.816917, lng: 120.956701 },
        };
        
        // Barangay-level coordinates for Bacoor (6 decimal places)
        const bacoorBarangays = {
            'molino': { lat: 14.423512, lng: 120.982478 },
            'queens row': { lat: 14.440013, lng: 120.974982 },
            'salawag': { lat: 14.417528, lng: 120.954983 },
            'springville': { lat: 14.429045, lng: 120.991987 },
            'panapaan': { lat: 14.452013, lng: 120.968041 },
            'tabing dagat': { lat: 14.462015, lng: 120.959028 },
            'mabolo': { lat: 14.414987, lng: 120.969964 },
            'niog': { lat: 14.420019, lng: 120.960047 },
        };
        
        // Check if it's a barangay (format: "municipality - barangay")
        if (cityName.includes(' - ')) {
            const parts = cityName.split(' - ');
            const municipality = parts[0].toLowerCase().trim();
            const barangay = parts[1].toLowerCase().trim();
            
            if (municipality === 'bacoor' && bacoorBarangays[barangay]) {
                return bacoorBarangays[barangay];
            }
        }
        
        return cities[cityName.toLowerCase()] || null;
    },
    
    updateDistances(userLocation) {
        const jobCards = document.querySelectorAll('[data-lat][data-lng]');
        console.log(`=== DISTANCE CALCULATION ===`);
        console.log(`User location: lat=${userLocation.latitude}, lng=${userLocation.longitude}`);
        
        jobCards.forEach((card, index) => {
            const jobLat = parseFloat(card.dataset.lat);
            const jobLng = parseFloat(card.dataset.lng);
            
            if (!isNaN(jobLat) && !isNaN(jobLng)) {
                const distance = this.calculateDistance(
                    userLocation.latitude,
                    userLocation.longitude,
                    jobLat,
                    jobLng
                );
                
                if (index < 3) {
                    console.log(`Job ${index + 1}: (${jobLat}, ${jobLng}) -> ${distance.toFixed(3)}km`);
                }
                
                const distanceDisplay = card.querySelector('.distance-display');
                if (distanceDisplay) {
                    const span = distanceDisplay.querySelector('span');
                    if (span) {
                        span.textContent = this.formatDistance(distance);
                    }
                    distanceDisplay.style.display = 'flex';
                }
            }
        });
    }
};

// Clean initialization  
document.addEventListener('DOMContentLoaded', function() {
    // Show cached location info if available
    showCachedLocationInfo();
    
    LocationManager.initializeDistances();
    
    // Show proximity filter if location is set (URL params or cached)
    const urlParams = new URLSearchParams(window.location.search);
    const hasLocation = urlParams.get('lat') || urlParams.get('municipality');
    const cachedLocation = localStorage.getItem('userLocation');
    
    if (hasLocation || cachedLocation) {
        const proximityFilter = document.getElementById('proximityFilter');
        proximityFilter.style.display = 'block';
        
        // Wait for distance displays to be populated, then initialize filter
        setTimeout(() => {
            // Make sure slider matches currentMaxDistance
            document.getElementById('distanceValue').textContent = currentMaxDistance;
            document.getElementById('distanceSlider').value = currentMaxDistance;
            
            console.log('Initializing proximity filter at ' + currentMaxDistance + 'km');
            filterJobsByDistance();
        }, 500);
    }
    
    // Prevent modal inputs from triggering search form
    const locationModal = document.getElementById('locationModal');
    const searchForm = document.getElementById('searchForm');
    
    // Add event listeners to modal inputs
    const cityInput = document.getElementById('manualCity');
    const barangayInput = document.getElementById('manualBarangay');
    
    if (cityInput) {
        cityInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                applyManualLocation();
                return false;
            }
        });
        
        cityInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }
        });
    }
    
    if (barangayInput) {
        barangayInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                applyManualLocation();
                return false;
            }
        });
        
        barangayInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }
        });
    }
    
    // Prevent search form from intercepting modal inputs
    if (searchForm && locationModal) {
        searchForm.addEventListener('submit', function(e) {
            const activeEl = document.activeElement;
            if (activeEl && (activeEl.id === 'manualCity' || activeEl.id === 'manualBarangay')) {
                e.preventDefault();
                e.stopPropagation();
                applyManualLocation();
                return false;
            }
        });
        
        // Stop propagation from modal to prevent any parent form submission
        locationModal.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.target.tagName === 'INPUT') {
                e.stopPropagation();
            }
        }, true);
    }
});
</script>

{% endblock %}

{% block guide_data %}
{
    "enabled": true,
    "page_name": "job_list",
    "title": "Browse Jobs - Quick Guide",
    "steps": [
        {
            "title": "Welcome to Job Listings! üéØ",
            "content": "<h3>Find Your Perfect Job</h3><p>This page displays all available jobs posted by employers. Whether you're looking for a one-time gig or regular work, you'll find opportunities here.</p><div class='guide-tip'><strong>üí° Tip:</strong> Make sure your profile is complete to increase your chances of getting hired!</div>"
        },
        {
            "title": "Search & Filter Jobs üîç",
            "content": "<h3>Finding the Right Opportunities</h3><p>Use the powerful search and filter tools to narrow down jobs:</p><ul><li><strong>Search Bar:</strong> Type keywords like 'plumber', 'driver', or 'construction'</li><li><strong>Category Filter:</strong> Browse by job type</li><li><strong>Location Filter:</strong> Find jobs near you</li><li><strong>Date Posted:</strong> See the newest opportunities first</li></ul><p>Jobs are shown as cards with key information at a glance.</p>"
        },
        {
            "title": "Understanding Job Cards üìã",
            "content": "<h3>What Each Job Shows</h3><p>Each job card displays:</p><ul><li><strong>Job Title:</strong> What the work involves</li><li><strong>Employer Name:</strong> Who posted the job</li><li><strong>Location:</strong> Where the job is located</li><li><strong>Pay Rate:</strong> How much you'll earn</li><li><strong>Posted Date:</strong> When it was posted</li><li><strong>Deadline:</strong> Last day to apply</li></ul><p>Click on any job card to see full details and requirements.</p>"
        },
        {
            "title": "Applying to Jobs ‚úÖ",
            "content": "<h3>How to Submit an Application</h3><ol><li>Click on a job that interests you</li><li>Read the full job description carefully</li><li>Check the requirements and qualifications</li><li>Click the <strong>'Apply Now'</strong> button</li><li>Fill out your application with relevant details</li><li>Submit and wait for employer response</li></ol><div class='guide-warning'><strong>‚ö†Ô∏è Important:</strong> Only apply to jobs you're qualified for and genuinely interested in.</div>"
        },
        {
            "title": "Managing Your Applications üì±",
            "content": "<h3>Track Your Job Applications</h3><p>After applying, you can:</p><ul><li>View application status in your Worker Dashboard</li><li>Receive notifications when employers respond</li><li>Message employers directly</li><li>Accept or decline job offers</li></ul><p>Check your dashboard regularly to stay updated on your applications.</p>"
        },
        {
            "title": "You're Ready to Start! üöÄ",
            "content": "<h3>Begin Your Job Search</h3><p>You now know how to find and apply for jobs on Trabaholink!</p><p><strong>Next Steps:</strong></p><ul><li>Browse available jobs below</li><li>Complete your profile if you haven't already</li><li>Set up location preferences for relevant jobs</li><li>Enable notifications to never miss opportunities</li></ul><div class='guide-tip'><strong>üí° Pro Tip:</strong> Apply early! Jobs get filled quickly, so check for new postings daily.</div><p>Good luck with your job search! üéâ</p>"
        }
    ]
}
{% endblock %}
