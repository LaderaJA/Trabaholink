{% extends "mainpages/base.html" %}
{% block content %}
<!-- Hero Banner -->
<div class="posts-hero">
    <div class="container">
        <div class="hero-content">
            <div>
                <h1 class="hero-title">
                    <i class="bi bi-grid-3x3-gap-fill"></i> Posts
                </h1>
                <p class="hero-subtitle">Browse job opportunities and service offerings</p>
            </div>
        </div>
    </div>
</div>

<div class="container mt-4">
  <!-- Filter Options -->
  <form method="get" class="mb-3">
    <label for="post-filter">Show:</label>
    <select id="post-filter" name="type" class="form-select w-auto d-inline-block" onchange="this.form.submit()">
      <option value="all" {% if filter_type == "all" %}selected{% endif %}>All Posts</option>
      <option value="job" {% if filter_type == "job" %}selected{% endif %}>Job Posts Only</option>
      <option value="service" {% if filter_type == "service" %}selected{% endif %}>Service Posts Only</option>
    </select>
    <noscript>
      <button type="submit" class="btn btn-primary">Apply</button>
    </noscript>
  </form>
  
  {% if posts %}
  <div class="row">
    {% for post in posts %}
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="card h-100 shadow-sm">
        {% if post.post_type == "Job" and post.job_picture %}
          <img src="{{ post.job_picture.url }}" class="card-img-top" alt="{{ post.title }}">
        {% elif post.post_type == "Service" and post.image %}
          <img src="{{ post.image.url }}" class="card-img-top" alt="{{ post.headline }}">
        {% endif %}
        <div class="card-body">
          <h5 class="card-title">
            {% if post.post_type == "Job" %}
              [Job] {{ post.title }}
            {% elif post.post_type == "Service" %}
              [Service] {{ post.headline }}
            {% endif %}
          </h5>
          <p class="card-text">{{ post.description|truncatechars:100 }}</p>
          <p class="card-text"><small class="text-muted">Posted on {{ post.created_at|date:"M d, Y" }}</small></p>
          <a href="{{ post.get_absolute_url }}" class="btn btn-primary">View Details</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
    <p>No posts available.</p>
  {% endif %}
</div>

<style>
    /* Hero Banner */
    .posts-hero {
        background: #1A94D5;
        color: white;
        padding: 4rem 0 3rem;
        margin-bottom: 3rem;
        border-bottom: 1px solid #1A94D5;
    }

    .hero-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 2rem;
        flex-wrap: wrap;
    }

    .hero-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin: 0 0 0.5rem 0;
        display: flex;
        align-items: center;
        gap: 1rem;
        color: white;
    }

    .hero-subtitle {
        font-size: 1.125rem;
        margin: 0;
        color: rgba(255, 255, 255, 0.9);
    }

    @media (max-width: 768px) {
        .hero-title {
            font-size: 2rem;
        }

        .hero-content {
            flex-direction: column;
            align-items: flex-start;
        }
    }
</style>
{% endblock %}
