{% extends "mainpages/base.html" %}
{% load static %}

{% block css %}
<style>
  .privacy-option {
    background: #fff;
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    border: 1px solid #e9ecef;
  }
  .privacy-option h5 {
    color: #333;
    margin-bottom: 1rem;
    font-weight: 600;
  }
  .form-check {
    margin-bottom: 1rem;
  }
  .form-check-label {
    color: #495057;
    cursor: pointer;
  }
  .btn-save {
    background-color: #0d6efd;
    color: white;
    padding: 0.5rem 2rem;
    border-radius: 6px;
    font-weight: 500;
  }
  .btn-save:hover {
    background-color: #0b5ed7;
    color: white;
  }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">Privacy Settings</h2>
        <a href="{% url 'profile_edit' pk=user.pk %}" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left me-1"></i> Back to Profile
        </a>
      </div>

      {% if messages %}
        <div class="mb-4">
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <form method="post" class="privacy-settings-form">
        {% csrf_token %}
        
        <div class="privacy-option">
          <h5>Profile Visibility</h5>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="profile_visibility" id="visibility_public" value="public" 
                   {% if form.profile_visibility.value == 'public' or not form.profile_visibility.value %}checked{% endif %}>
            <label class="form-check-label" for="visibility_public">
              Public - Anyone can view my profile
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="profile_visibility" id="visibility_connections" value="connections"
                   {% if form.profile_visibility.value == 'connections' %}checked{% endif %}>
            <label class="form-check-label" for="visibility_connections">
              Connections Only - Only my connections can view my profile
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="profile_visibility" id="visibility_private" value="private"
                   {% if form.profile_visibility.value == 'private' %}checked{% endif %}>
            <label class="form-check-label" for="visibility_private">
              Private - Only I can view my profile
            </label>
          </div>
          {% if form.profile_visibility.errors %}
            <div class="text-danger mt-2">{{ form.profile_visibility.errors }}</div>
          {% endif %}
        </div>

        <div class="privacy-option">
          <h5>Contact Information</h5>
          <div class="form-check form-switch mb-3">
            {{ form.show_email }}
            <label class="form-check-label" for="{{ form.show_email.id_for_label }}">
              {{ form.show_email.label }}
            </label>
          </div>
          <div class="form-check form-switch">
            {{ form.show_phone }}
            <label class="form-check-label" for="{{ form.show_phone.id_for_label }}">
              {{ form.show_phone.label }}
            </label>
          </div>
        </div>

        <div class="privacy-option">
          <h5>Activity Privacy</h5>
          <div class="form-check form-switch mb-3">
            {{ form.show_activity }}
            <label class="form-check-label" for="{{ form.show_activity.id_for_label }}">
              {{ form.show_activity.label }}
            </label>
          </div>
          <div class="form-check form-switch">
            {{ form.allow_search_engines }}
            <label class="form-check-label" for="{{ form.allow_search_engines.id_for_label }}">
              {{ form.allow_search_engines.label }}
            </label>
          </div>
        </div>

        <div class="d-flex justify-content-end mt-4">
          <button type="submit" class="btn btn-primary btn-save">
            <i class="bi bi-save me-2"></i>Save Changes
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Add any client-side validation or interactions here
  console.log('Privacy settings page loaded');
});
</script>
{% endblock %}


{% block guide_data %}
{
    "enabled": true,
    "page_name": "privacy_settings",
    "title": "Privacy Settings Guide",
    "steps": [
        {
            "title": "Control Your Privacy \ud83d\udd12",
            "content": "<h3>Manage Visibility</h3><p>Control who can see your profile information and activity on the platform.</p>"
        },
        {
            "title": "Privacy Options \u2699\ufe0f",
            "content": "<h3>What You Can Control</h3><ul><li>Profile visibility</li><li>Contact information display</li><li>Activity feed visibility</li><li>Search engine indexing</li></ul>"
        },
        {
            "title": "Stay Safe \ud83d\udee1\ufe0f",
            "content": "<h3>Privacy Tips</h3><ul><li>Share only necessary info</li><li>Review settings regularly</li><li>Be cautious with personal data</li><li>Report suspicious activity</li></ul>"
        }
    ]
}
{% endblock %}